var __spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},Identity=_w.Identity;(function(n){function o(){var r=_ge("id_acclink_container"),n,t;if(r&&(n=r.querySelectorAll(".id_link"),n))for(t=0;t<n.length;t++)n[t].getAttribute("data-p")==="M"&&sj_be(n[t],"click",i)}function i(t){return sj_pd(t),_w.open(n.AccountLinkManageLink.Url,n.AccountLinkManageLink.LinkTarget),!1}function t(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t]}function r(n,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];typeof Log!="undefined"&&Log&&Log.Log&&Log.Log.apply(Log,__spreadArray([f,n,t,!1],r,!1))}var u="acclink",f="acclink";if(o(),sj_evt&&n){sj_evt.bind("acclink:updated",function(n){if(n&&n.length>=2){var i=n[1],r=i.IsTenantAllowAccountLink,u=i.HasLinkedAccount;t("update Id dropdown with acclink:updated ",n[1]);e(r,u)}},1);function e(u,f){var e=_ge("id_acclink_container"),c,o,s,h;if(e)if(u)if(f){if(t("update Id dropdown accountlink,show manage link"),!n.AccountLinkManageLink||!n.AccountLinkManageLink.Url){r("updateIdDropdown","show AccountLinkManageLink","error","invalid Identity.AccountLinkManageLink");return}if(o=e.querySelectorAll(".id_link"),o)for(s=0;s<o.length;s++)if(o[s].getAttribute("data-p")==="M"){t("account link manage link exist, no need update");return}e.innerHTML="";c=sj_ce("a");c.classList.add("id_link");c.setAttribute("role","link");c.setAttribute("data-p","M");sj_be(c,"click",i);c.innerHTML=n.AccountLinkManageLink.Text;e.appendChild(c)}else{if(!n.AccountLinkActivateLink||!n.AccountLinkActivateLink.Url){r("updateIdDropdown","show AccountLinkActivateLink","error","invalid Identity.AccountLinkActivateLink");return}if(t("update Id dropdown accountlink, show activate link"),o=e.querySelectorAll(".id_link"),o)for(s=0;s<o.length;s++)if(o[s].getAttribute("data-p")==="A"){t("account link activate link exist, no need update");return}e.innerHTML="";h=sj_ce("a");h.classList.add("id_link");h.setAttribute("role","link");h.setAttribute("data-p","A");h.href=n.AccountLinkActivateLink.Url;h.target=n.AccountLinkActivateLink.LinkTarget;h.innerHTML=n.AccountLinkActivateLink.Text;e.appendChild(h)}else t("update Id dropdown accountlink,not show link"),e.innerHTML=""}}})(Identity||{})